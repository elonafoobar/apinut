

    <!doctype html>
    <html class="no-js" lang="">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>core.event module</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../uikit.min.css" type="text/css" />
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
    </head>
    <body>

    <div class="uk-container uk-container-center">
    <div class="uk-grid uk-margin-top">

    <img src="../atcat.png" alt="Lua API" class="icon">

    <!-- sidebar start -->
    <aside class="uk-width-medium-1-5 uk-row-first">
    <div id="sidebar" class="uk-panel">

    <div class="sidebar-custom">

    <div class="project-infobox">

    <!-- project title -->

    <a href="../index.html"><h1 style="padding-top: 8px">Lua API</h1></a>

    <!-- project description -->
    <p class="project-desc">Elona foobar Mod API</p>

    <!-- project full description -->
    <span>  Core API for modding Elona foobar</span>
    </div>


    <!-- sidebar navigation -->
    <ul class="uk-nav">
    <li class="nav-item">
    <h2 class="uk-panel-title">Modules</h2>
    <ul class="nav">
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Animation.html"><span class="module-name-item">Animation</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Calc.html"><span class="module-name-item">Calc</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Chara.html"><span class="module-name-item">Chara</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Config.html"><span class="module-name-item">Config</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Console.html"><span class="module-name-item">Console</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Data.html"><span class="module-name-item">Data</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Debug.html"><span class="module-name-item">Debug</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Enchantment.html"><span class="module-name-item">Enchantment</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Env.html"><span class="module-name-item">Env</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/FOV.html"><span class="module-name-item">FOV</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/GUI.html"><span class="module-name-item">GUI</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/I18N.html"><span class="module-name-item">I18N</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Input.html"><span class="module-name-item">Input</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Inventory.html"><span class="module-name-item">Inventory</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Item.html"><span class="module-name-item">Item</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/JSON5.html"><span class="module-name-item">JSON5</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Magic.html"><span class="module-name-item">Magic</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Map.html"><span class="module-name-item">Map</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Pos.html"><span class="module-name-item">Pos</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Rand.html"><span class="module-name-item">Rand</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Skill.html"><span class="module-name-item">Skill</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Trait.html"><span class="module-name-item">Trait</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Wish.html"><span class="module-name-item">Wish</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/World.html"><span class="module-name-item">World</span></a></div></li>
    <li class="nav-item active"><div class="nav-item-block-active block"><a href="../modules/core.event.html"><span class="module-name-item">core.event</span></a><i class="icon icon-arrow-left icon-arrow-left-custom"></i></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Enums.html"><span class="module-name-item">Enums</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../modules/Event.html"><span class="module-name-item">Event</span></a></div></li>
    </ul>
    </li>
    </ul>
    <ul class="uk-nav">
    <li class="nav-item">
    <h2 class="uk-panel-title">Classes</h2>
    <ul class="nav">
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaAbility.html"><span class="module-name-item">LuaAbility</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaArea.html"><span class="module-name-item">LuaArea</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaCharacter.html"><span class="module-name-item">LuaCharacter</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaDateTime.html"><span class="module-name-item">LuaDateTime</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaGameData.html"><span class="module-name-item">LuaGameData</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaInventory.html"><span class="module-name-item">LuaInventory</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaItem.html"><span class="module-name-item">LuaItem</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaMapData.html"><span class="module-name-item">LuaMapData</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaMapGenerator.html"><span class="module-name-item">LuaMapGenerator</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../classes/LuaPosition.html"><span class="module-name-item">LuaPosition</span></a></div></li>
    </ul>
    </li>
    </ul>
    <ul class="uk-nav">
    <li class="nav-item">
    <h2 class="uk-panel-title">Topics</h2>
    <ul class="nav">
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/README.md.html"><span class="module-name-item">README.md</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/config.md.html"><span class="module-name-item">config.md</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/console.md.html"><span class="module-name-item">console.md</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/i18n.md.html"><span class="module-name-item">i18n.md</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/i18n_format_syntax.md.html"><span class="module-name-item">i18n_format_syntax.md</span></a></div></li>
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../topics/i18n_functions.md.html"><span class="module-name-item">i18n_functions.md</span></a></div></li>
    </ul>
    </li>
    </ul>
    <ul class="uk-nav">
    <li class="nav-item">
    <h2 class="uk-panel-title">Examples</h2>
    <ul class="nav">
    <li class="nav-item"><div class="nav-item-block-inactive block"><a href="../examples/life.lua.html"><span class="module-name-item">life.lua</span></a></div></li>
    </ul>
    </li>
    </ul>



    <!-- list of items in a module -->
    <ul class="uk-nav nav nav-module-contents">
    <li class="nav-item">
    <h4 class="uk-panel-title">Contents of <strong>core.event</strong></h4>
    <ul class="nav">
    <li class="nav-item"><a href="#Events"><span class="fragment-hashtag">#</span> Events</a></li>
    </ul>
    </li>
    </ul>
    </div>
    <div class="up-to-top">
    <a href="#">Top <i class="icon icon-upward"></i></a>
    </div>
    </div>
    </aside>
    <!-- sidebar end -->

    <!-- content body start -->
    <div class="uk-width-medium-4-5 uk-push-1">

    <!-- module list on the main page start -->
    <!-- module list on the main page end -->

    <!-- module contents -->

    <!-- module content header start -->

    <h2><span class="body-module-name"><strong><em>core.event</em></strong></span> module</h2>
    <p>A set of events that can be listened for using the <code>Event</code> module.</p>
    <p>

</p>


    <!-- module info start -->
    <!-- module info end -->

    <!-- module usage start -->
    <h3>See also</h3>
    <ul class="module-see-also">
    <li><a href="../modules/Event.html#">Event</a></li>
    </ul>
    <h3>Usage</h3>
    <pre class="code" data-lang="Lua"><code><span class="keyword">local</span> Event = ELONA.<span class="global">require</span>(<span class="string">"core.Event"</span>)
<span class="keyword">local</span> <span class="keyword">function</span> my_chara_moved_handler(e)
   <span class="keyword">local</span> chara = e.chara
   <span class="comment">-- your code here
</span><span class="keyword">end</span>
Event.register(<span class="string">"core.character_moved"</span>, my_chara_moved_handler)</code></pre>
    <!-- module usage end -->

    <!-- module content header end -->

    <!-- module section list start -->
    <table class="section-content-list">
    <thead>
    <h3><a href="#Events">Events</a></h3>
    <span></span>
    </thead>
    <tbody>
    <tr>
    <td class="name"><a href="#core.game_initialized">core.game_initialized</a></td>
    <td class="summary">Fired after the game has finished initially loading.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_created">core.character_created</a></td>
    <td class="summary">Fired after a character has been initially created (but not loaded
 from a savefile).</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.item_created">core.item_created</a></td>
    <td class="summary">Fired after an item has been initially created (but not loaded
 from a savefile).</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_removed">core.character_removed</a></td>
    <td class="summary">Fired after a character is no longer valid for use inside scripts.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.item_removed">core.item_removed</a></td>
    <td class="summary">Fired after an item is no longer valid for use inside scripts.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_refreshed">core.character_refreshed</a></td>
    <td class="summary">Fired after a character is refreshed.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.calc_character_damage">core.calc_character_damage</a></td>
    <td class="summary">Fired before a character is damaged.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_damaged">core.character_damaged</a></td>
    <td class="summary">Fired after a character is damaged.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_killed">core.character_killed</a></td>
    <td class="summary">Fired after a character was killed.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.character_moved">core.character_moved</a></td>
    <td class="summary">Fired when a character is about to start moving.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.player_turn_started">core.player_turn_started</a></td>
    <td class="summary">Fired when a player's turn has just started.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.all_turns_finished">core.all_turns_finished</a></td>
    <td class="summary">Fired when all characters have finished their actions this turn.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.map_initialized">core.map_initialized</a></td>
    <td class="summary">Fired after a map has been initialized.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.before_map_unload">core.before_map_unload</a></td>
    <td class="summary">Fired before the current map is unloaded.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.all_mods_loaded">core.all_mods_loaded</a></td>
    <td class="summary">Fired when all mods have finished loading.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.script_loaded">core.script_loaded</a></td>
    <td class="summary">Fired when the startup script finished loading.</td>
    </tr>
    <tr>
    <td class="name"><a href="#core.script_loaded">core.script_loaded</a></td>
    <td class="summary">Fired when a nefia is created.</td>
    </tr>
    </tbody>
    </table>
    <!-- module section list end -->

    <br />

    <!-- section start -->
    <h3><span id="Events" class="section-title"><a href="#Events">Events</a></span></h3>
    <dl class="section-body-container">
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.game_initialized" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.game_initialized">core.game_initialized</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after the game has finished initially loading.</p>
    <p class="section-item-description"> This will
 only ever be fired once per game session. The starting map will be
 initialized before this is called.</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_created" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_created">core.character_created</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a character has been initially created (but not loaded
 from a savefile).</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>chara</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that was created

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.item_created" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.item_created">core.item_created</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after an item has been initially created (but not loaded
 from a savefile).</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>item</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaItem.html#">LuaItem</a></span>)

     the item that was created

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_removed" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_removed">core.character_removed</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a character is no longer valid for use inside scripts.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>chara</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that was removed

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.item_removed" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.item_removed">core.item_removed</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after an item is no longer valid for use inside scripts.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>item</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaItem.html#">LuaItem</a></span>)

     the item that was removed

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_refreshed" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_refreshed">core.character_refreshed</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a character is refreshed.</p>
    <p class="section-item-description"> This means various
 attributes like speed are recalculated. Also, intrinsic character
 flags (the first 32) will be automatically set from their prototype
 definitions on refresh. This means that if you want to set a
 character's intrinsic flag, you have to do so on this event.</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>chara</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that was refreshed

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <strong>See also:</strong>
    <ul>
    <li><a href="../classes/LuaCharacter.html#LuaCharacter:set_flag">LuaCharacter.set_flag</a></li>
    </ul>
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.calc_character_damage" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.calc_character_damage">core.calc_character_damage</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired before a character is damaged.</p>
    <p class="section-item-description"> You can change the amount of
 damage taken by modifying <code>amount</code>.</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>target</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character will be damaged

    </li>





    <li class="section-subitem-li">

    <strong><em>element</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#Element">Enums.Element</a></span>)

     the element type of the damage

    (<em>optional</em>)
    </li>





    <li class="section-subitem-li">

    <strong><em>source</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#DamageSource">Enums.DamageSource</a> or <a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the source of the damage

    </li>





    <li class="section-subitem-li">

    <strong><em>damage</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">num</span></span>)

     (<b><i>mut</i></b>) the amount of damage

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_damaged" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_damaged">core.character_damaged</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a character is damaged.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>target</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that was damaged

    </li>





    <li class="section-subitem-li">

    <strong><em>element</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#Element">Enums.Element</a></span>)

     the element type of the damage

    (<em>optional</em>)
    </li>





    <li class="section-subitem-li">

    <strong><em>source</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#DamageSource">Enums.DamageSource</a> or <a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the source of the damage

    </li>





    <li class="section-subitem-li">

    <strong><em>damage</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">num</span></span>)

     the amount of damage

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_killed" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_killed">core.character_killed</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a character was killed.</p>
    <p class="section-item-description"> This might not remove the
 character, because they might revive at some later time (like NPCs
 in towns). As such, you shouldn't remove the character's data from
 global storage here.</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>target</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that was killed

    </li>





    <li class="section-subitem-li">

    <strong><em>element</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#Element">Enums.Element</a></span>)

     the element type of the damage received

    (<em>optional</em>)
    </li>





    <li class="section-subitem-li">

    <strong><em>source</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../modules/Enums.html#DamageSource">Enums.DamageSource</a> or <a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the source of the killing

    </li>





    <li class="section-subitem-li">

    <strong><em>damage</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">num</span></span>)

     the amount of damage that caused the killing

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.character_moved" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.character_moved">core.character_moved</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when a character is about to start moving.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>chara</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaCharacter.html#">LuaCharacter</a></span>)

     the character that is moving

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <strong>Usage:</strong>
    <pre class="code" data-lang="Lua"><code><span class="keyword">local</span> GUI = ELONA.<span class="global">require</span>(<span class="string">"core.GUI"</span>)
<span class="keyword">local</span> Event = ELONA.<span class="global">require</span>(<span class="string">"core.Event"</span>)

<span class="keyword">local</span> <span class="keyword">function</span> my_chara_moved_handler(e)
    GUI.txt(<span class="string">"The character "</span> .. e.chara.name .. <span class="string">" is about to move. "</span>)
<span class="keyword">end</span>

Event.register(<span class="string">"core.character_moved"</span>, my_chara_moved_handler)</code></pre>
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.player_turn_started" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.player_turn_started">core.player_turn_started</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when a player's turn has just started.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.all_turns_finished" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.all_turns_finished">core.all_turns_finished</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when all characters have finished their actions this turn.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.map_initialized" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.map_initialized">core.map_initialized</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired after a map has been initialized.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>regenerated</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">bool</span></span>)

     true if this map was reset to its initial

    </li>





    <li class="section-subitem-li">

    <strong><em>id</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">string</span></span>)

     ID of the map

    </li>





    <li class="section-subitem-li">

    <strong><em>index</em></strong>

    <strong> : </strong>

    (<span class="types"><span class="type">num</span></span>)

     the instance index of the map
 state on load

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <strong>Usage:</strong>
    <pre class="code" data-lang="Lua"><code><span class="keyword">local</span> Chara = ELONA.<span class="global">require</span>(<span class="string">"core.Chara"</span>)
<span class="keyword">local</span> Event = ELONA.<span class="global">require</span>(<span class="string">"core.Event"</span>)
<span class="keyword">local</span> Map = ELONA.<span class="global">require</span>(<span class="string">"core.Map"</span>)

<span class="keyword">local</span> <span class="keyword">function</span> place_characters()
    <span class="keyword">for</span> i=<span class="number">0</span>, <span class="number">50</span> <span class="keyword">do</span>
        <span class="keyword">local</span> pos = Map.random_pos()
        Chara.create(pos, <span class="string">"core.putit"</span>)
    <span class="keyword">end</span>
<span class="keyword">end</span>

Event.register(<span class="string">"core.map_initialized"</span>, place_characters)</code></pre>
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.before_map_unload" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.before_map_unload">core.before_map_unload</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired before the current map is unloaded.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.all_mods_loaded" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.all_mods_loaded">core.all_mods_loaded</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when all mods have finished loading.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.script_loaded" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.script_loaded">core.script_loaded</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when the startup script finished loading.</p>
    <p class="section-item-description"> This is only fired
 when the startup script config option is used.</p>

    <!-- parameters start -->
    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    <dt>
    <div class="divider divider-custom"></div>
    <div class="block section-item-header">
    <a href="#core.script_loaded" class="fragment-hashtag">#</a>
    <span class="section-item-title" id="core.script_loaded">core.script_loaded</span>
    </div>
    </dt>
    <dd>
    <div class="section-item-body">

    <p class="section-item-summary">Fired when a nefia is created.</p>
    <p class="section-item-description">

</p>

    <!-- parameters start -->
    <strong>Event Parameters:</strong>

    <ul>





    <li class="section-subitem-li">

    <strong><em>nefia</em></strong>

    <strong> : </strong>

    (<span class="types"><a class="type" href="../classes/LuaArea.html#">LuaArea</a></span>)

     the created nefia

    </li>


    </ul>

    <!-- parameters end -->

    <!-- returns start -->
    <!-- returns end -->


    <!-- see also start -->
    <!-- see also end -->

    <!-- usage start -->
    <!-- usage end -->

    </dd>
    </dl>

    <!-- section end -->

    </div>
    </div>
    </div>

    <div class="uk-container uk-container-center uk-hidden-small">
    <hr/>
    <div class="footer-columns columns">
    <div class="sidebar-footer column col-3 col-sm-12">
    <i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
    </div>
    <div class="content-footer column col-9 col-sm-12">
    <i>Last updated 2020-09-22 UTC</i>
    </div>
    </div>
    </div>
    </body>
    </html>
